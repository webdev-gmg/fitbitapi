<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <title>Fitbit API</title>
</head>
<body>
    <h1>Fitbit Login</h1>
</body>

<script>
// get the url
var url = window.location.href;

//getting the access token from url
var access_token = url.split("#")[1].split("=")[1].split("&")[0];

// get the userid
var userId = url.split("#")[1].split("=")[2].split("&")[0];

console.log(access_token);
console.log(userId);






axios.get('https://api.fitbit.com/1/user/-/activities/date/2019-03-29.json?=',
 { headers: { Authorization: `Bearer ${access_token}` } })
.then(response => {
            // If request is good...
            console.log(response.data);
          })
          .catch((error) => {
            console.log('error 3 ' + error);
          });



/* Jquery Ajax Call
function showStats(){
var settings = {
  "url": "https://api.fitbit.com/1/user/-/activities/date/2019-03-29.json?=",
  "method": "GET",
  "headers": {
    "Content-Type": "application/json",
    "Authorization": `Bearer ${access_token}`
  },

}

$.ajax(settings).done(function (response) {
  console.log(response);
});
}

showStats();*/
</script>
</html>